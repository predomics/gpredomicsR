% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/extendr-wrappers.R
\name{as_gpredomics_data}
\alias{as_gpredomics_data}
\title{Create a Gpredomics Data object from an R DataFrame \code{df} (X) and a named label vector \code{y}.}
\usage{
as_gpredomics_data(
  df,
  y_vec,
  features_in_columns,
  prior_weight,
  feature_penalty,
  feature_tags,
  sample_tags
)
}
\arguments{
\item{df}{R data.frame-like object containing feature values.}

\item{y_vec}{R vector containing binary labels, named with sample identifiers.}

\item{features_in_columns}{Boolean indicating if features are in columns (\code{true}) or rows (\code{false}).}

\item{prior_weight}{Named numeric vector: feature name -> prior weight (optional)}

\item{feature_penalty}{Named numeric vector: feature name -> penalty (optional)}

\item{feature_tags}{R data.frame with feature annotations (optional)}

\item{sample_tags}{R data.frame with sample metadata (optional)}
}
\value{
Gpredomics Data object with aligned and processed X and y.
}
\description{
Orientation and alignment:
\itemize{
\item If \code{features_in_columns = true}: rows are samples, columns are features; \code{names(y)} must match \code{rownames(df)}.
\item If \code{features_in_columns = false}: columns are samples, rows are features; \code{names(y)} must match \code{colnames(df)}.
\item Samples are strictly aligned by exact string matching; any mismatch of names triggers an error.
\item Internally, X is stored as a sparse map with keys \verb{(sample_idx, feature_idx)}.
}
}
\details{
Label handling (\code{y}):
\itemize{
\item Accepts integer, character, or 2-level factor.
\item If \code{y} has exactly two classes:
\itemize{
\item Character or factor: classes are extracted from the actual labels/levels and stored in \code{Data.classes}.
\item Integer:
\itemize{
\item If values are {0,1}, they are kept as-is (classes = c("0","1")).
\item If two distinct integers {a,b} are detected, a warning is emitted and a→0, b→1 mapping is applied (classes = c(str(a), str(b))).
}
}
\item If more than two non-missing classes are present, associated samples are classified as unknown.
\item The binary vector \code{y} is reordered to match the chosen sample order derived from \code{df}.
}

Requirements:
\itemize{
\item \code{df} must be an R data.frame-like object where feature values are numeric/integer/logical.
\item All sample names must be provided via \code{rownames(df)} (if \code{features_in_columns}) or \code{colnames(df)} (otherwise).
\item \code{y} must be named with the exact same sample identifiers used on the chosen axis of \code{df}.
}

Behavior on missing or invalid inputs:
\itemize{
\item Missing \code{names(y)}: a warning is emitted; a fallback alignment to the chosen sample order is attempted, but exact names are recommended.
\item Non-numeric feature columns (character): error advising to encode to numeric first.
\item Column/row length mismatches: error with the offending index and dimensions.
\item Any sample without a corresponding label in \code{y}: error with the sample name.
Errors:
\item Detailed, user-facing messages are emitted via R console and returned as \code{Err(Error::Other(...))}.
}

Notes:
\itemize{
\item Name normalization is not performed; ensure consistent punctuation (e.g., "-" vs ".") on both \code{df} and \code{y}.
\item For factors, R’s 1-based codes are mapped to their \code{levels} to retrieve human-readable class names.
}
}
